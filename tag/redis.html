<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>商伟的技术博客</title>
	<meta name="description" content="">
	<meta name="author" content="商伟">

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="/theme/html5.js"></script>
	<![endif]-->

	<!-- Styles -->
	<link href="/theme/bootstrap.min.css" rel="stylesheet">
	<link href="/theme/local.css" rel="stylesheet">
	<link href="/theme/pygments.css" rel="stylesheet">

	<!-- Feeds -->




</head>
<body>
	<div class="topbar">
	  <div class="topbar-inner">
		<div class="container-fluid">
		  <a class="brand" href="/">商伟的技术博客</a>
			<ul class="nav">
					<li ><a href="/category/django.html">Django</a></li>
					<li ><a href="/category/docker.html">Docker</a></li>
					<li ><a href="/category/git.html">GIT</a></li>
					<li ><a href="/category/javascript.html">JavaScript</a></li>
					<li ><a href="/category/mongodb.html">Mongodb</a></li>
					<li ><a href="/category/mysql.html">MySQL</a></li>
					<li ><a href="/category/pa-chong.html">爬虫</a></li>
					<li ><a href="/category/python.html">Python</a></li>
					<li ><a href="/category/rabbitmq.html">RabbitMQ</a></li>
					<li ><a href="/category/redis.html">redis</a></li>
					<li ><a href="/category/shu-ju-jie-gou.html">数据结构</a></li>
					<li ><a href="/category/sui-shou-bi-ji.html">随手笔记</a></li>
					<li ><a href="/category/supervisor.html">Supervisor</a></li>
					<li ><a href="/category/vue.html">VUE</a></li>
					<li ><a href="/category/wang-luo.html">网络</a></li>
					<li ><a href="/category/web.html">web</a></li>
					<li ><a href="/category/xiao-cheng-xu.html">小程序</a></li>
					<li ><a href="/category/xu-ni-huan-jing.html">虚拟环境</a></li>
			</ul>
			<p class="pull-right"><a href="/archives.html">[archives]</a> <a href="/tags.html">[tags]</a></p>
		</div>
	  </div>
	</div>

	<div class="container-fluid">
	  <div class="sidebar">
		<div class="well">
			<h3>Blogroll</h3>
			<ul>
				<li><a href="http://getpelican.com/">Pelican</a></li>
				<li><a href="http://python.org/">Python.org</a></li>
				<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
			</ul>
			<div class="social">
			<h3>Social</h3>
			<ul>
				<li><a href="https://lienze.tech/">老渔夫吃虾米</a></li>
			</ul>
			</div>
		</div>
	  </div>
	  <div class="content">
<div class="page-header"><h1>商伟的技术博客 <small>redis</small></h1></div>
<div class='article'>
	<h2>Linux安装redis</h2>
	<div class="well small">Permalink: <a class="more" href="/Linux安装redis.html">1000-01-01 18:44:00+00:09</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/redis.html">redis</a>
tags: <a href="/tag/redis.html">redis</a> </div>
	<div class="summary"><ul>
<li>下载redis安装包,在root目录下执行</li>
</ul>
<div class="highlight"><pre><span></span><span class="n">wget</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">download</span><span class="p">.</span><span class="n">redis</span><span class="p">.</span><span class="n">io</span><span class="o">/</span><span class="n">releases</span><span class="o">/</span><span class="n">redis</span><span class="o">-</span><span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">4</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span>
</pre></div>


<ul>
<li>解压redis安装包</li>
</ul>
<div class="highlight"><pre><span></span>   <span class="n">tar</span> <span class="n">xvf</span> <span class="n">redis</span><span class="o">-</span><span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">4</span><span class="p">.</span><span class="n">tar</span><span class="p">.</span><span class="n">gz</span>
</pre></div>


<ul>
<li>进入redis目录</li>
</ul>
<div class="highlight"><pre><span></span> <span class="n">cd</span> <span class="n">redis</span><span class="o">-</span><span class="mi">5</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">4</span>
</pre></div>


<ul>
<li>make(编译)</li>
</ul>
<div class="highlight"><pre><span></span><span class="err">注释掉</span> <span class="n">bind</span> <span class="mi">127</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">0</span><span class="p">.</span><span class="mi">1</span>
<span class="n">requirepass</span> <span class="s1">&#39;abc&#39;</span>
</pre></div>


<ul>
<li>运行redis：</li>
</ul>
<div class="highlight"><pre><span></span> <span class="p">.</span><span class="o">/</span><span class="n">src</span><span class="o">/</span><span class="n">redis</span><span class="o">-</span><span class="n">server</span><span class="o">/</span><span class="n">redis</span><span class="p">.</span><span class="n">conf</span>
</pre></div>


<ul>
<li>查看是否启动成功：</li>
</ul>
<div class="highlight"><pre><span></span> <span class="n">ps</span> <span class="n">aux</span> <span class="o">|</span> <span class="n">grep</span> <span class="n">redis …</span></pre></div> <a class="btn primary xsmall" href="/Linux安装redis.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Redis事务</h2>
	<div class="well small">Permalink: <a class="more" href="/Redis事务.html">1000-01-01 18:44:00+00:09</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/redis.html">Redis</a>
tags: <a href="/tag/redis.html">Redis</a> </div>
	<div class="summary"><h5>Redis事务一次性可以执行多条命令，并且带有一下三个重要的保证：</h5>
<ul>
<li>批量操作在发送 EXEC 命令前放入队列缓存</li>
<li>收到 EXEC 命令后进入事务执行，事务中任意的命令执行失败，其余的命令依然会被执行</li>
<li>在事务的过程中，其他客户提交的命令不会被插入事务执行命令的序列中</li>
</ul>
<h5>一个事务重开始到执行会经历三个阶段：</h5>
<ul>
<li>开始事务</li>
<li>命令入列</li>
<li>执行事务</li>
</ul>
<p>单个 Redis 命令的执行是原子性的，但 Redis 没有在事务上增加任何维持原子性的机制，所以 Redis 事务的中并不是原子性的，事务可以理解为打包的批量执行的脚本，然是批量指令不是原子化的操作，中间某条命令失败的化不会导致前面的命令回滚，也不会造成后面的命令不执行</p> <a class="btn primary xsmall" href="/Redis事务.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Redis分布式锁</h2>
	<div class="well small">Permalink: <a class="more" href="/Redis分布式锁.html">1000-01-01 18:44:00+00:09</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/redis.html">Redis</a>
tags: <a href="/tag/redis.html">Redis</a> </div>
	<div class="summary"><p>可靠性</p>
<p>首先，为了确保分布式可用，我们至少要保证锁的实现同时满足以下四个条件：</p>
<ul>
<li>互斥性，在任意时刻，只有一个客户端能持有锁</li>
<li>不会发生死锁，即使有一个客户端持有锁的期间崩溃而没有主动解锁，也能保证后续其他客户端能加锁</li>
<li>具有容错性，只要大部分的 Redis 节点正常运行，客户端就可以加锁和解锁</li>
<li>解铃还须系铃人，加锁和解锁必须是同一个客户端，客户端自己不能把别人加的锁给解了</li>
</ul> <a class="btn primary xsmall" href="/Redis分布式锁.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Redis的五大数据类型实现原理</h2>
	<div class="well small">Permalink: <a class="more" href="/Redis的五大数据类型实现原理.html">1000-01-01 18:44:00+00:09</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/redis.html">Redis</a>
tags: <a href="/tag/redis.html">Redis</a> </div>
	<div class="summary"><ul>
<li>Redis得到五大数据类型</li>
<li>字符串对象</li>
<li>列表对象</li>
<li>哈希对象</li>
<li>集合对象</li>
<li>有序集合对象</li>
</ul> <a class="btn primary xsmall" href="/Redis的五大数据类型实现原理.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Redis组从同步</h2>
	<div class="well small">Permalink: <a class="more" href="/Redis组从同步.html">1000-01-01 18:44:00+00:09</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/redis.html">Redis</a>
tags: <a href="/tag/redis.html">Redis</a> </div>
	<div class="summary"><h5>主从同步的构架</h5>
<ul>
<li>只有一台主机服务，只负责写入数据，不负责读取数据</li>
<li>多台从服务器，不负责写入数据，只负责同步主服务器的数据，供外部程序读取</li>
<li>主服务器写入数据后，将命令发送到从服务器上，使主从同步</li>
<li>应用程序可以读取某一台服务器的数据，负载均衡</li>
<li>当某些服务器瘫痪时，系统影响不大，选举出一台从服务器当做主服务器</li>
</ul>
<h5>2 增量同步</h5>
<p>Redis增量复制是指Slave初始化后开始正常工作时主服务器发生的写操作同步到从服务器的过程。 </p>
<p>增量复制的过程主要是主服务器每执行一个写命令就会向从服务器发送相同的写命令，从服务器接收并执行收到的写命令。</p>
<h5>3 Redis主从同步策略</h5>
<p>主从刚刚连接的时候，进行全量同步；全同步结束后，进行增量同步。当然，如果有需要，slave 在任何时候都可以发起全量同步。redis 策略是，无论如何，首先会尝试进行增量同步，如不成功，要求从机进行全量同步</p> <a class="btn primary xsmall" href="/Redis组从同步.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Redis集群</h2>
	<div class="well small">Permalink: <a class="more" href="/Redis集群.html">1000-01-01 18:44:00+00:09</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/redis.html">Redis</a>
tags: <a href="/tag/redis.html">Redis</a> </div>
	<div class="summary"> <a class="btn primary xsmall" href="/Redis集群.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Windows安装redis</h2>
	<div class="well small">Permalink: <a class="more" href="/Windows安装redis.html">1000-01-01 18:44:00+00:09</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/redis.html">redis</a>
tags: <a href="/tag/redis.html">redis</a> </div>
	<div class="summary"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="p">.</span><span class="err">将安装包解压到一个文件夹下</span><span class="p">:</span> <span class="err">如</span> <span class="n">D</span><span class="p">:</span><span class="err">\</span><span class="n">redis</span><span class="p">,</span> <span class="err">会在该文件夹下看到所有</span><span class="n">redis的文件</span>
<span class="mi">2</span><span class="p">.</span><span class="err">将该文件夹添加至系统环境变量中</span>
<span class="mi">3</span><span class="p">.</span><span class="err">在解压的文件目录的地址栏上输入</span><span class="n">cmd</span><span class="p">,</span> <span class="err">在</span><span class="n">cmd窗口中输入redis</span><span class="o">-</span><span class="n">server</span> <span class="p">.</span><span class="o">/</span><span class="n">redis</span><span class="p">.</span><span class="n">windows</span><span class="p">.</span><span class="n">conf</span> <span class="p">,</span> <span class="err">然后回车</span><span class="p">,</span> <span class="n">redis安装成功了</span>
</pre></div> <a class="btn primary xsmall" href="/Windows安装redis.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>redis哨兵模式</h2>
	<div class="well small">Permalink: <a class="more" href="/redis哨兵模式.html">1000-01-01 18:44:00+00:09</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/redis.html">redis</a>
tags: <a href="/tag/redis.html">redis</a> </div>
	<div class="summary"><h1>Redis哨兵(Sentinel)模式</h1>
<h2>一、概述</h2>
<p>哨兵通过发送命令。等待Redis服务器响应，从而监控运行的多个Redis实例</p>
<p><img alt="1574609729003" src="http://c.biancheng.net/uploads/allimg/190725/5-1ZH51400314I.png"></p>
<h3>哨兵作用</h3>
<ul>
<li>通过发送命令，让Redis服务器返回 监控其运行状态，包括主服务器和从服务器</li>
<li>当哨兵监测到master宕机，会自动将slave(从)切换成master(主)，然后通过‘发布订阅模式’ 通知其他从服务器，修改配置文件，让他们切换主机</li>
</ul>
<h2>二、配置redis主从服务器</h2>
<ol>
<li>修改redis.conf</li>
</ol>
<div class="highlight"><pre><span></span>   <span class="c1"># redis服务器可以跨网络访问</span>
   <span class="n">bind</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
   <span class="c1"># 设置密码</span>
   <span class="n">requirepass</span> <span class="s1">&#39;123&#39;</span>
   <span class="c1"># 指定主服务器(只配置从服务器，主服务器不需要配置)</span>
   <span class="n">slaveof</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">11.128</span> <span class="mi">6379</span>
   <span class="c1"># 主服务器密码</span>
   <span class="n">masterauth</span> <span class="mi">123</span>
</pre></div>


<ol>
<li>配置3个哨兵，每个哨兵的配置都是一样的 …</li></ol> <a class="btn primary xsmall" href="/redis哨兵模式.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>redis安装及配置</h2>
	<div class="well small">Permalink: <a class="more" href="/redis安装及配置.html">1000-01-01 18:44:00+00:09</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/redis.html">redis</a>
tags: <a href="/tag/redis.html">redis</a> </div>
	<div class="summary"><h5>centos7 安装redis</h5>
<h5>下载源码</h5>
<div class="highlight"><pre><span></span>wget http://download.redis.io/releases/redis-5.0.7.tar.gz
</pre></div>


<h5>解压</h5>
<div class="highlight"><pre><span></span>tar xzf redis-5.0.7.tar.gz
</pre></div>


<h5>进入文件进行编译</h5>
<div class="highlight"><pre><span></span>cd redis-5.0.7/ 
</pre></div>


<h5>执行提示信息</h5>
<div class="highlight"><pre><span></span> make &amp;&amp; make install PREFIX=/usr/local/redis
</pre></div>


<h4>如果出现</h4>
<h4>1)</h4>
<p><img alt="shang" src="http://q2swuopnz.bkt.clouddn.com/blogs/1577448685327.png"></p>
<h5>原因是系统没有安装gcc环境，解决：</h5>
<h5>安装gcc</h5>
<div class="highlight"><pre><span></span>yum install gcc-c++
</pre></div>


<h5>清空上次编译残留，不然会有问题的</h5>
<div class="highlight"><pre><span></span>make distclean
</pre></div>


<h5>执行编译及安装</h5>
<div class="highlight"><pre><span></span> make &amp;&amp; make …</pre></div> <a class="btn primary xsmall" href="/redis安装及配置.html">more…</a>
	</div>
</div>	


		<footer>
		  <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>.</p>
		  <p>&copy; 商伟</p>
		</footer>
	  </div>

	</div>
</body>
</html>