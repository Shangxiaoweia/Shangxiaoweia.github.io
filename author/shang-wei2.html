<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>商伟的技术博客</title>
	<meta name="description" content="">
	<meta name="author" content="商伟">

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="/theme/html5.js"></script>
	<![endif]-->

	<!-- Styles -->
	<link href="/theme/bootstrap.min.css" rel="stylesheet">
	<link href="/theme/local.css" rel="stylesheet">
	<link href="/theme/pygments.css" rel="stylesheet">

	<!-- Feeds -->




</head>
<body>
	<div class="topbar">
	  <div class="topbar-inner">
		<div class="container-fluid">
		  <a class="brand" href="/">商伟的技术博客</a>
			<ul class="nav">
					<li ><a href="/category/django.html">Django</a></li>
					<li ><a href="/category/git.html">GIT</a></li>
					<li ><a href="/category/rabbitmq.html">RabbitMQ</a></li>
					<li ><a href="/category/redis.html">redis</a></li>
					<li ><a href="/category/supervisor.html">Supervisor</a></li>
					<li ><a href="/category/vue.html">VUE</a></li>
			</ul>
			<p class="pull-right"><a href="/archives.html">[archives]</a> <a href="/tags.html">[tags]</a></p>
		</div>
	  </div>
	</div>

	<div class="container-fluid">
	  <div class="sidebar">
		<div class="well">
			<h3>Blogroll</h3>
			<ul>
				<li><a href="http://getpelican.com/">Pelican</a></li>
				<li><a href="http://python.org/">Python.org</a></li>
				<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
				<li><a href="#">You can modify those links in your config file</a></li>
			</ul>
			<div class="social">
			<h3>Social</h3>
			<ul>
				<li><a href="#">You can add links in your config file</a></li>
				<li><a href="#">Another social link</a></li>
			</ul>
			</div>
		</div>
	  </div>
	  <div class="content">
<div class="page-header"><h1>商伟的技术博客 <small>商伟</small></h1></div>
<div class='article'>
	<h2>VUE拦截器</h2>
	<div class="well small">Permalink: <a class="more" href="/VUE拦截器.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/vue.html">VUE</a>
tags: <a href="/tag/vue.html">VUE</a> </div>
	<div class="summary"><h2>vue 拦截器</h2>
<ul>
<li>
<p>路由拦截器</p>
</li>
<li>
<p>已路由为导向</p>
</li>
</ul>
<div class="highlight"><pre><span></span>  router.beforeEach<span class="o">((</span>to,from,next<span class="o">)=</span>&gt;<span class="o">{</span>
      <span class="k">if</span><span class="o">(</span>to.path<span class="o">==</span><span class="s1">&#39;/login&#39;</span> <span class="o">||</span> to.path<span class="o">==</span><span class="s1">&#39;reg&#39;</span> <span class="o">||</span> localStorage.getItem<span class="o">(</span><span class="s1">&#39;token&#39;</span><span class="o">)){</span>
        next<span class="o">()</span><span class="p">;</span>
      <span class="o">}</span><span class="k">else</span><span class="o">{</span>
        alert<span class="o">(</span><span class="s1">&#39;请重新登录&#39;</span><span class="o">)</span><span class="p">;</span>
        next<span class="o">(</span><span class="s1">&#39;/login&#39;</span><span class="o">)</span><span class="p">;</span>
      <span class="o">}</span>
  <span class="o">})</span>
</pre></div>


<ul>
<li>
<p>请求拦截器</p>
</li>
<li>
<p>当发送请求时才会触发此功能</p>
</li>
</ul>
<div class="highlight"><pre><span></span>  axios.interceptors.request.use<span class="o">(</span><span class="k">function</span> <span class="o">(</span>config<span class="o">)</span> <span class="o">{</span>
    <span class="nb">let</span> <span class="nv">token</span> <span class="o">=</span> window.localStorage.getItem<span class="o">(</span><span class="s2">&quot;token&quot;</span><span class="o">)</span><span class="p">;</span>
        <span class="k">if</span> <span class="o">(</span>token<span class="o">)</span> <span class="o">{</span>
            config.headers.token <span class="o">=</span> token<span class="p">;</span>    //将token放到请求头发送给服务器
        <span class="o">}</span>
       <span class="k">return</span> config<span class="p">;</span> // 最终需要返回config
      <span class="o">}</span>, <span class="k">function …</span></pre></div> <a class="btn primary xsmall" href="/VUE拦截器.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>django分页组件（paginator）</h2>
	<div class="well small">Permalink: <a class="more" href="/django分页组件（paginator）.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/django.html">Django</a>
tags: <a href="/tag/django.html">Django</a> </div>
	<div class="summary"><h1>Django分页组件(paginator)</h1>
<blockquote>
<p><code>shell
from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger</code></p>
</blockquote>
<div class="highlight"><pre><span></span>  Paginator
</pre></div>


<p>：创建分页对象</p>
<p>### 分页对象内置属性</p>
<div class="highlight"><pre><span></span><span class="nv">all_</span> <span class="o">=</span> models.objects.all<span class="o">()</span>
<span class="nv">p</span> <span class="o">=</span> Paginator<span class="o">(</span>all_, <span class="m">10</span><span class="o">)</span>
<span class="c1"># 分页all_数据，每页显示10条数据</span>
p.count <span class="c1"># 总数据量</span>
p.num_pages<span class="o">()</span> <span class="c1"># 分页数</span>
p.page_range<span class="o">()</span> <span class="c1"># 列表形式返回当前可有的页数 [1,2,3]</span>
<span class="nv">page_1</span> <span class="o">=</span> p.page<span class="o">(</span><span class="m">1</span><span class="o">)</span> <span class="c1"># 选择第一页，返回第一页数据对象</span>
</pre></div>


<h3>某一页内置属性</h3>
<div class="highlight"><pre><span></span>page_1.number <span class="c1"># 当前页的页码</span>
page_1.has_next<span class="o">()</span> <span class="c1"># 是否有下一页</span>
page_1 …</pre></div> <a class="btn primary xsmall" href="/django分页组件（paginator）.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>redis哨兵模式</h2>
	<div class="well small">Permalink: <a class="more" href="/redis哨兵模式.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/redis.html">redis</a>
tags: <a href="/tag/redis.html">redis</a> </div>
	<div class="summary"><h1>Redis哨兵(Sentinel)模式</h1>
<h2>一、概述</h2>
<p>哨兵通过发送命令。等待Redis服务器响应，从而监控运行的多个Redis实例</p>
<p><img alt="1574609729003" src="http://c.biancheng.net/uploads/allimg/190725/5-1ZH51400314I.png"></p>
<h3>哨兵作用</h3>
<ul>
<li>通过发送命令，让Redis服务器返回 监控其运行状态，包括主服务器和从服务器</li>
<li>当哨兵监测到master宕机，会自动将slave(从)切换成master(主)，然后通过‘发布订阅模式’ 通知其他从服务器，修改配置文件，让他们切换主机</li>
</ul>
<h2>二、配置redis主从服务器</h2>
<ol>
<li>修改redis.conf</li>
</ol>
<div class="highlight"><pre><span></span>   <span class="c1"># redis服务器可以跨网络访问</span>
   <span class="n">bind</span> <span class="mf">0.0</span><span class="o">.</span><span class="mf">0.0</span>
   <span class="c1"># 设置密码</span>
   <span class="n">requirepass</span> <span class="s1">&#39;123&#39;</span>
   <span class="c1"># 指定主服务器(只配置从服务器，主服务器不需要配置)</span>
   <span class="n">slaveof</span> <span class="mf">192.168</span><span class="o">.</span><span class="mf">11.128</span> <span class="mi">6379</span>
   <span class="c1"># 主服务器密码</span>
   <span class="n">masterauth</span> <span class="mi">123</span>
</pre></div>


<ol>
<li>配置3个哨兵，每个哨兵的配置都是一样的 …</li></ol> <a class="btn primary xsmall" href="/redis哨兵模式.html">more…</a>
	</div>
</div>	

<div class="pagination">
<ul>
		<li class="prev"><a href="/author/shang-wei.html">&larr; Previous</a></li>
		<li class=""><a href="/author/shang-wei.html">1</a></li>
		<li class="active"><a href="/author/shang-wei2.html">2</a></li>
		<li class="next disabled"><a href="#">&rarr; Next</a></li>
</ul>
</div>

		<footer>
		  <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>.</p>
		  <p>&copy; 商伟</p>
		</footer>
	  </div>

	</div>
</body>
</html>