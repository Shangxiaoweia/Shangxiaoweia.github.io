<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>商伟的技术博客</title>
	<meta name="description" content="">
	<meta name="author" content="商伟">

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="/theme/html5.js"></script>
	<![endif]-->

	<!-- Styles -->
	<link href="/theme/bootstrap.min.css" rel="stylesheet">
	<link href="/theme/local.css" rel="stylesheet">
	<link href="/theme/pygments.css" rel="stylesheet">

	<!-- Feeds -->




</head>
<body>
	<div class="topbar">
	  <div class="topbar-inner">
		<div class="container-fluid">
		  <a class="brand" href="/">商伟的技术博客</a>
			<ul class="nav">
					<li ><a href="/category/django.html">Django</a></li>
					<li ><a href="/category/docker.html">Docker</a></li>
					<li ><a href="/category/git.html">GIT</a></li>
					<li ><a href="/category/javascript.html">JavaScript</a></li>
					<li ><a href="/category/mongodb.html">Mongodb</a></li>
					<li ><a href="/category/mysql.html">MySQL</a></li>
					<li ><a href="/category/pa-chong.html">爬虫</a></li>
					<li ><a href="/category/python.html">Python</a></li>
					<li ><a href="/category/rabbitmq.html">RabbitMQ</a></li>
					<li ><a href="/category/redis.html">redis</a></li>
					<li ><a href="/category/shu-ju-jie-gou.html">数据结构</a></li>
					<li ><a href="/category/sui-shou-bi-ji.html">随手笔记</a></li>
					<li ><a href="/category/supervisor.html">Supervisor</a></li>
					<li ><a href="/category/vue.html">VUE</a></li>
					<li ><a href="/category/wang-luo.html">网络</a></li>
					<li ><a href="/category/web.html">web</a></li>
					<li ><a href="/category/xiao-cheng-xu.html">小程序</a></li>
					<li ><a href="/category/xu-ni-huan-jing.html">虚拟环境</a></li>
			</ul>
			<p class="pull-right"><a href="/archives.html">[archives]</a> <a href="/tags.html">[tags]</a></p>
		</div>
	  </div>
	</div>

	<div class="container-fluid">
	  <div class="sidebar">
		<div class="well">
			<h3>Blogroll</h3>
			<ul>
				<li><a href="http://getpelican.com/">Pelican</a></li>
				<li><a href="http://python.org/">Python.org</a></li>
				<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
			</ul>
			<div class="social">
			<h3>Social</h3>
			<ul>
				<li><a href="https://han520min.github.io">hanmin</a></li>
			</ul>
			</div>
		</div>
	  </div>
	  <div class="content">
<div class="page-header"><h1> 商伟的技术博客 </h1></div>
<div class='article'>
	<h2>Django多对多系列化与反序列化</h2>
	<div class="well small">Permalink: <a class="more" href="/Django多对多系列化与反序列化.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/django.html">Django</a>
tags: <a href="/tag/django.html">Django</a> </div>
	<div class="summary"><h2>Django 序列化和反序列化</h2>
<p>一、 序列化</p>
<ul>
<li>
<p>查询所有的学生的信息，包括任课老师</p>
</li>
<li>
<p><code>models.py</code></p>
</li>
</ul>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>

<span class="c1"># 学生类</span>
<span class="k">class</span> <span class="nc">Student</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>

    <span class="c1"># 老师类</span>
<span class="k">class</span> <span class="nc">Teacher</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">32</span><span class="p">)</span>
    <span class="n">students</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">ManyToManyField</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s1">&#39;Student&#39;</span><span class="p">,</span><span class="n">related_name</span><span class="o">=</span><span class="s1">&#39;teacher&#39;</span><span class="p">)</span>
</pre></div>


<ul>
<li><code>serializer.py</code></li>
</ul>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rest_framework</span> <span class="kn">import</span> <span class="n">serializers</span>
<span class="kn">from</span> <span class="nn">.</span> <span class="kn">import</span> <span class="n">models</span>

<span class="c1"># 老师序列化 …</span></pre></div> <a class="btn primary xsmall" href="/Django多对多系列化与反序列化.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Django抽象类</h2>
	<div class="well small">Permalink: <a class="more" href="/Django抽象类.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/django.html">Django</a>
tags: <a href="/tag/django.html">Django</a> </div>
	<div class="summary"><h1>abstract</h1>
<p>这个属性是定义当前的模型类是不是一个抽象类。所谓抽象类是不会对应数据库表的。一般我们用它来归纳一些公共属性字段，然后继承它的子类可以继承这些字段。比如下面的代码中Base是一个抽象类，Usermodel是一个继承了Base的子类，那么在运行生成命令时，不会生成Base表，但是会生成一个Usermodel表，它包含了Base中继承来的字段，以后如果再添加一个Kecheng模型类，它可以同样继承Base的公共属性：</p>
<div class="highlight"><pre><span></span><span class="c1"># 抽象类</span>
<span class="k">class</span> <span class="n">Base</span>(<span class="n">models</span>.<span class="n">Model</span>):
    <span class="n">create_date</span> = <span class="n">models</span>.<span class="n">DateTimeField</span>(<span class="n">auto_now</span>=<span class="nb">True</span>)
    <span class="n">update_date</span> = <span class="n">models</span>.<span class="n">DateTimeField</span>(<span class="n">auto_now_add</span>=<span class="nb">True</span>)

    <span class="k">class</span> <span class="n">Meta:</span>
        <span class="n">abstract</span> = <span class="nb">True</span>

<span class="c1"># 用户表</span>
<span class="k">class</span> <span class="n">Usermodel</span>(<span class="n">Base</span>):
    <span class="nb">name</span> = <span class="n">models</span>.<span class="n">CharField</span>(<span class="n">max_length</span>=<span class="mi">32</span>)
    <span class="n">pwd</span> = <span class="n">models</span>.<span class="n">CharField</span>(<span class="n">max_length</span>=<span class="mi">255</span>)

<span class="c1"># 课程表</span>
<span class="k">class</span> <span class="n">Kecheng</span>(<span class="n">Base …</span></pre></div> <a class="btn primary xsmall" href="/Django抽象类.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Django支付宝沙箱模式</h2>
	<div class="well small">Permalink: <a class="more" href="/Django支付宝沙箱模式.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/django.html">Django</a>
tags: <a href="/tag/django.html">Django</a> </div>
	<div class="summary"><h3>支付宝支付</h3>
<ul>
<li>安装模块</li>
</ul>
<div class="highlight"><pre><span></span>  pip install Crypto 
  pip install pycryptodome
  pip install python-alipay-sdk
</pre></div>


<ul>
<li>
<p>下载RSA工具
  <img alt="img" src="https://img2018.cnblogs.com/blog/1354307/201911/1354307-20191107134351045-2102495901.png"></p>
</li>
<li>
<p>将生成的公钥上传到支付宝沙箱的RSA2(SHA256)密钥(推荐）处</p>
</li>
</ul>
<p><img alt="img" src="https://img2018.cnblogs.com/blog/1354307/201911/1354307-20191107134403625-1800493074.jpg"></p>
<ul>
<li>设置公钥后会生成一个支付宝公钥，将其复制</li>
</ul>
<p><img alt="img" src="https://img2018.cnblogs.com/blog/1354307/201911/1354307-20191107134416436-1047655704.png"></p>
<ul>
<li>然后将其写入一个文件 <code>alipay_pulic_key.pem</code></li>
</ul>
<div class="highlight"><pre><span></span>  -----BEGIN PUBLIC KEY-----
  MIGfMA0GCSqGSIb3DQEBAQUAA4GNIgHnOn7LLILlKETd6BFRJ0GqgS2Y3mn1wMQmyh9zEyWlz5p1zrahRahbXAfCfSqshSNfqOmAQzSHRVjCqjsAw1jyqrXaPdKBmr90DIpIxmIyKXv4GGAkPyJ/6FTFY99uhpiq0qadD/uSzQsefWo0aTvP/65zi3eof7TcZ32oWpwIDAQAB
  -----END PUBLIC KEY-----
</pre></div>


<ul>
<li>把之前生成的私钥也写入另外一个文件 <code>app_private_key.pem</code></li>
</ul>
<div class="highlight"><pre><span></span>  -----BEGIN RSA PRIVATE KEY-----
  MIIEowIBAAKCAQEAgxk5N/XQkRatTn56TxGo8nVGk4YKb7VheSDtcLezj7sDdibVamrWz/77VG1GY17Q2jOnCoHpngWDsJybZ/5icblvk3I76H5GT+zjYMBbHXfAlnRB7BG6+Vo7YWe442S0E+A8z8N+R3MArSb3+Coht+8JgvGNdsVE9u2upmxq4GHMKDu/TY3Q7lPIXW3iL6Kxn …</pre></div> <a class="btn primary xsmall" href="/Django支付宝沙箱模式.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Django查询语句</h2>
	<div class="well small">Permalink: <a class="more" href="/Django查询语句.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/django.html">Django</a>
tags: <a href="/tag/django.html">Django</a> </div>
	<div class="summary"><h1>查询语句</h1>
<div class="highlight"><pre><span></span>    #查询全部数据 翻译为 <span class="nv">select</span> <span class="o">*</span> <span class="nv">from</span> <span class="nv">user</span><span class="c1">; all()返回值是list</span>
    <span class="nv">res</span> <span class="o">=</span> <span class="nv">User</span>.<span class="nv">objects</span>.<span class="nv">all</span><span class="ss">()</span>
    #<span class="nv">print</span><span class="ss">(</span><span class="nv">res</span><span class="ss">)</span>
    #分页 <span class="mi">0</span>开始位置,<span class="mi">2</span>结束位置，注意<span class="mi">2</span>不是取几条
    <span class="nv">res</span> <span class="o">=</span> <span class="nv">User</span>.<span class="nv">objects</span>.<span class="nv">all</span><span class="ss">()</span>[<span class="mi">0</span>,<span class="mi">2</span>]
    #<span class="nv">print</span><span class="ss">(</span><span class="nv">res</span><span class="ss">)</span>

    #查询限定条件的数据 翻译为 <span class="nv">select</span> <span class="o">*</span> <span class="nv">from</span> <span class="nv">user</span> <span class="nv">where</span> <span class="nv">username</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="s">新用户123</span><span class="s1">&#39;</span> <span class="nv">and</span>逻辑使用多个参数传递
    <span class="nv">res</span> <span class="o">=</span> <span class="nv">User</span>.<span class="nv">objects</span>.<span class="nv">filter</span><span class="ss">(</span><span class="nv">username</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">新用户</span><span class="s1">&#39;</span>,<span class="nv">password</span><span class="o">=</span><span class="s1">&#39;</span><span class="s">你好</span><span class="s1">&#39;</span><span class="ss">)</span>
    #<span class="nv">print</span><span class="ss">(</span><span class="nv">res …</span></pre></div> <a class="btn primary xsmall" href="/Django查询语句.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Django跨域与VUE跨域</h2>
	<div class="well small">Permalink: <a class="more" href="/Django跨域与VUE跨域.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/django.html">Django</a>
tags: <a href="/tag/django.html">Django</a> </div>
	<div class="summary"><h2>Django 解决跨域</h2>
<ul>
<li>安装 django-cors-headers</li>
</ul>
<div class="highlight"><pre><span></span>  pip install django-cors-headers
</pre></div>


<ul>
<li>在 settings.py 的 install_apps 中注册</li>
</ul>
<div class="highlight"><pre><span></span>  <span class="nv">INSTALLED_APPS</span> <span class="o">=</span> <span class="o">[</span>
      <span class="s1">&#39;corsheaders&#39;</span>
  <span class="o">]</span>
</pre></div>


<ul>
<li>在settings.py 的 middleware 中注册</li>
</ul>
<div class="highlight"><pre><span></span>  <span class="nv">MIDDLEWARE</span> <span class="o">=</span> <span class="o">[</span>
      <span class="s1">&#39;corsheaders.middleware.CorsMiddleware&#39;</span>, <span class="c1"># 一定要在commonmiddleware之上</span>
    <span class="s1">&#39;django.middleware.common.CommonMiddleware&#39;</span>,
  <span class="o">]</span>
</pre></div>


<ul>
<li>在 settings.py 的任意位置 添加</li>
</ul>
<div class="highlight"><pre><span></span>  <span class="nv">CORS_ORIGIN_ALLOW_ALL</span> <span class="o">=</span> True
</pre></div>


<ul>
<li>完成django 跨域</li>
</ul>
<h2>VUE 解决跨域</h2>
<ul>
<li>打开config/index.js,在proxyTable中添写如下代码</li>
</ul>
<div class="highlight"><pre><span></span>proxyTable: <span class="o">{</span> 
  <span class="s1">&#39;/api&#39;</span>: <span class="o">{</span>  //使用<span class="s2">&quot;/api&quot;</span>来代替<span class="s2">&quot;http …</span></pre></div> <a class="btn primary xsmall" href="/Django跨域与VUE跨域.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>Docker-基础</h2>
	<div class="well small">Permalink: <a class="more" href="/Docker-基础.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/docker.html">Docker</a>
tags: <a href="/tag/docker.html">Docker</a> </div>
	<div class="summary"><h4>什么是Docker</h4>
<ul>
<li>
<p>Docker 是使用最广泛的开源容器引擎</p>
</li>
<li>
<p>一种操作系统基本的虚拟化技术</p>
</li>
<li>一种简单的应用程序打包工具</li>
<li>依赖 Linux 内核特性：Namespace(资源隔离) 和 Cgroup（资源限制）</li>
</ul>
<p><strong>注：</strong>每个容器拥有一套和宿主机完全隔离的文件系统（共用linux内核），程序在这个虚拟容器里运行，就好像在真实的物理机上运行一样。</p>
<p><strong>容器：</strong></p>
<p><strong>1）</strong>容器是一个操作系统级别下的虚拟化技术，运行一个容器就行运行一个进程一样</p>
<p><strong>2）</strong>容器依赖linux内核特性：Namespace（资源隔离）和 Cgroups（资源限制）</p>
<p><strong>资源隔离：</strong></p>
<p>1）Linux Namespaces机制提供一种资源隔离方案，每个namespace看上去就像一个单独的Linux系统。</p>
<p>2）PID,IPC(进程通信),Network等系统资源不再是全局性的，而是属于某个特定的Namespace。</p>
<p>3）每个namespace下的资源对于其他namespace下的资源都是透明，不可见的。</p>
<p>4）系统中可以同时存在两个进程号为0,1,2的进程，由于属于不同的namespace，所以它们之间并不冲突。</p>
<p>5 …</p> <a class="btn primary xsmall" href="/Docker-基础.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>django分页组件（paginator）</h2>
	<div class="well small">Permalink: <a class="more" href="/django分页组件（paginator）.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/django.html">Django</a>
tags: <a href="/tag/django.html">Django</a> </div>
	<div class="summary"><h1>Django分页组件(paginator)</h1>
<div class="highlight"><pre><span></span>from django.core.paginator import Paginator, EmptyPage, PageNotAnInteger
</pre></div>


<div class="highlight"><pre><span></span>  Paginator
</pre></div>


<p>：创建分页对象</p>
<p>### 分页对象内置属性</p>
<div class="highlight"><pre><span></span><span class="nv">all_</span> <span class="o">=</span> models.objects.all<span class="o">()</span>
<span class="nv">p</span> <span class="o">=</span> Paginator<span class="o">(</span>all_, <span class="m">10</span><span class="o">)</span>
<span class="c1"># 分页all_数据，每页显示10条数据</span>
p.count <span class="c1"># 总数据量</span>
p.num_pages<span class="o">()</span> <span class="c1"># 分页数</span>
p.page_range<span class="o">()</span> <span class="c1"># 列表形式返回当前可有的页数 [1,2,3]</span>
<span class="nv">page_1</span> <span class="o">=</span> p.page<span class="o">(</span><span class="m">1</span><span class="o">)</span> <span class="c1"># 选择第一页，返回第一页数据对象</span>
</pre></div>


<h3>某一页内置属性</h3>
<div class="highlight"><pre><span></span>page_1.number <span class="c1"># 当前页的页码</span>
page_1.has_next<span class="o">()</span> <span class="c1"># 是否有下一页</span>
page_1.has_previous …</pre></div> <a class="btn primary xsmall" href="/django分页组件（paginator）.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>三分钟创建一个静态网页</h2>
	<div class="well small">Permalink: <a class="more" href="/三分钟创建一个静态网页.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/django.html">Django</a>
tags: <a href="/tag/django.html">Django</a> </div>
	<div class="summary"><h3>这个静态网页可以用来做你自己的博客，pelican是以为法国开发者研发的，非常好用，它的每一篇文章会事先渲染成HTML静态文件，访问速度非常快。</h3>
<h5>1)安装pelcan和markdown</h5>
<div class="highlight"><pre><span></span>pip install pelican  markdown --upgrade
</pre></div>


<h5>2)创建一个文件夹用来作为博客的目录</h5>
<div class="highlight"><pre><span></span>mkdir 博客目录
</pre></div>


<h5>3)cd到该目录下运行命令生成博客的框架</h5>
<div class="highlight"><pre><span></span>cd 博客目录
pelican-quickstart
</pre></div>


<h5>4)安装过程中会有很多的配置，不知道的可以直接n，后期都是可以进行修改的</h5>
<div class="highlight"><pre><span></span>&gt; Where do you want to create your new web site? [.]
&gt; What will be the title of this web site? 商伟的技术博客
&gt; Who will be the author …</pre></div> <a class="btn primary xsmall" href="/三分钟创建一个静态网页.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>常见的数据结构</h2>
	<div class="well small">Permalink: <a class="more" href="/常见的数据结构.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/shu-ju-jie-gou.html">数据结构</a>
tags: <a href="/tag/shu-ju-jie-gou.html">数据结构</a> </div>
	<div class="summary"> <a class="btn primary xsmall" href="/常见的数据结构.html">more…</a>
	</div>
</div>	
<div class='article'>
	<h2>微信小程序介绍</h2>
	<div class="well small">Permalink: <a class="more" href="/微信小程序介绍.html">2019-08-08 18:44:00+02:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/xiao-cheng-xu.html">小程序</a>
tags: <a href="/tag/xiao-cheng-xu.html">小程序</a> </div>
	<div class="summary"><h3>开发者工具</h3>
<p>为方便微信小程序，微信推出了微信开发者工具。</p>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html">https://developers.weixin.qq.com/miniprogram/dev/devtools/download.html</a></p>
<h2>微信小程序官方文档</h2>
<p><a href="https://developers.weixin.qq.com/miniprogram/dev/framework/">https://developers.weixin.qq.com/miniprogram/dev/framework/</a></p>
<h2>小程序快速入门</h2>
<p><a href="https://developers.weixin.qq.com/community/business/doc/000264e20a0dd8e69669b609451c0d">https://developers.weixin.qq.com/community/business/doc/000264e20a0dd8e69669b609451c0d</a></p> <a class="btn primary xsmall" href="/微信小程序介绍.html">more…</a>
	</div>
</div>	

<div class="pagination">
<ul>
		<li class="prev"><a href="/index.html">&larr; Previous</a></li>
		<li class=""><a href="/index.html">1</a></li>
		<li class="active"><a href="/index2.html">2</a></li>
		<li class=""><a href="/index3.html">3</a></li>
		<li class=""><a href="/index4.html">4</a></li>
		<li class=""><a href="/index5.html">5</a></li>
		<li class=""><a href="/index6.html">6</a></li>
		<li class=""><a href="/index7.html">7</a></li>
		<li class=""><a href="/index8.html">8</a></li>
		<li class=""><a href="/index9.html">9</a></li>
		<li class="next"><a href="/index3.html">Next &rarr;</a></li>
</ul>
</div>

		<footer>
		  <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>.</p>
		  <p>&copy; 商伟</p>
		</footer>
	  </div>

	</div>
</body>
</html>