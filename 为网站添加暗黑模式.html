<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>商伟的技术博客</title>
	<meta name="description" content="">
	<meta name="author" content="商伟">

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="/theme/html5.js"></script>
	<![endif]-->

	<!-- Styles -->
	<link href="/theme/bootstrap.min.css" rel="stylesheet">
	<link href="/theme/local.css" rel="stylesheet">
	<link href="/theme/pygments.css" rel="stylesheet">

	<!-- Feeds -->




</head>
<body>
	<div class="topbar">
	  <div class="topbar-inner">
		<div class="container-fluid">
		  <a class="brand" href="/">商伟的技术博客</a>
			<ul class="nav">
					<li ><a href="/category/django.html">Django</a></li>
					<li ><a href="/category/docker.html">Docker</a></li>
					<li ><a href="/category/git.html">GIT</a></li>
					<li ><a href="/category/javascript.html">JavaScript</a></li>
					<li ><a href="/category/mongodb.html">Mongodb</a></li>
					<li ><a href="/category/mysql.html">MySQL</a></li>
					<li ><a href="/category/pa-chong.html">爬虫</a></li>
					<li ><a href="/category/python.html">Python</a></li>
					<li ><a href="/category/rabbitmq.html">RabbitMQ</a></li>
					<li ><a href="/category/redis.html">redis</a></li>
					<li ><a href="/category/shu-ju-jie-gou.html">数据结构</a></li>
					<li ><a href="/category/sui-shou-bi-ji.html">随手笔记</a></li>
					<li ><a href="/category/supervisor.html">Supervisor</a></li>
					<li ><a href="/category/vue.html">VUE</a></li>
					<li ><a href="/category/wang-luo.html">网络</a></li>
					<li class="active"><a href="/category/web.html">web</a></li>
					<li ><a href="/category/xiao-cheng-xu.html">小程序</a></li>
					<li ><a href="/category/xu-ni-huan-jing.html">虚拟环境</a></li>
			</ul>
			<p class="pull-right"><a href="/archives.html">[archives]</a> <a href="/tags.html">[tags]</a></p>
		</div>
	  </div>
	</div>

	<div class="container-fluid">
	  <div class="sidebar">
		<div class="well">
			<h3>Blogroll</h3>
			<ul>
				<li><a href="http://getpelican.com/">Pelican</a></li>
				<li><a href="http://python.org/">Python.org</a></li>
				<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
			</ul>
			<div class="social">
			<h3>Social</h3>
			<ul>
				<li><a href="https://han520min.github.io">hanmin</a></li>
			</ul>
			</div>
		</div>
	  </div>
	  <div class="content">
	<div class='article'>
		<div class="page-header"><h1>为网站添加暗黑模式</h1></div>
		<div class="well small">Permalink: <a class="more" href="/为网站添加暗黑模式.html">2020-01-15 22:20:00+01:00</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/web.html">web</a>
tags: <a href="/tag/web.html">web</a> </div>
		<div><p>究竟什么是暗黑模式？这个概念起初来源于macOS系统，该系统的mojave版本为用户提供两个主题皮肤，即浅色和深色的皮肤。自从有了这个概念之后，很多网站和系统都会用户提供了相应的两套肤色，便于用户根据自己的习惯或爱好进行切换</p>
<p><img alt="img" src="http://m.qpic.cn/psc?/V11vDzPO1w5782/evyMJ*ZwKmN7EwaKYDZ0cJsaS6tPtY3Ylot*koQ8t7rtX9PMrDQXsJ.ez1e094bIVVwA6mrijapv.TVC3WYaplPif*ONKGLodw1vASMNNLA!/b&amp;bo=lgKUApYClAICSW0!&amp;rf=viewer_4"></p>
<p>从科学的角度讲，低对比度的暗色可以降低屏幕对视网膜的刺激，同时还可以让电子设备更加省电。</p>
<p>在过往的印象之中，最早实现类似的效果，一般都是通过JavaScript来更换Web页面或Web应用程序主题皮肤的.css文件，但是对于维护多套样式是较为痛苦的，特别当你要为你的产品提供更多的皮肤的时候更为堪忧。这个时候你可以借助类似Sass这样的处理器来维护你的主题样式，声明好变量，然后维护对应的变量值。</p>
<p>这就是css3的自定义属性，自定义属性的出现，可以让css样式也使用变量，通过js可以动态的修改变量的值</p>
<div class="highlight"><pre><span></span><span class="o">//</span><span class="err">现在全局定义</span>
<span class="p">:</span><span class="n">root</span><span class="p">{</span>
   <span class="o">--</span><span class="n">theme</span><span class="o">-</span><span class="n">color</span><span class="p">:</span><span class="n">red</span><span class="p">;</span>
<span class="p">}</span>

<span class="o">//</span><span class="err">使用的时候</span>
<span class="c1">#app{</span>
    <span class="n">background</span><span class="o">-</span><span class="n">color</span><span class="p">:</span><span class="n">var</span><span class="p">(</span><span class="o">--</span><span class="n">theme</span><span class="o">-</span><span class="n">color</span><span class="p">);</span>
<span class="p">}</span>

<span class="o">//</span><span class="err">假如我们没有指定</span><span class="o">--</span><span class="n">theme</span><span class="o">-</span><span class="n">color这个属性</span><span class="err">，则可以在使用的时候加上替代值</span>
<span class="c1">#app{</span>
    <span class="n">background</span><span class="o">-</span><span class="n">color</span><span class="p">:</span><span class="n">var</span><span class="p">(</span><span class="o">--</span><span class="n">theme</span><span class="o">-</span><span class="n">color</span><span class="p">,</span><span class="n">black</span><span class="p">);</span><span class="o">//</span><span class="err">没有指定</span><span class="o">--</span><span class="n">theme</span><span class="o">-</span><span class="n">color则会由black代替</span>
<span class="p">}</span>
</pre></div>


<p>通过JS获取和设置自定义的属性</p>
<div class="highlight"><pre><span></span><span class="o">//</span><span class="n">js中获取</span><span class="c1">--theme-color的值</span>
<span class="n">var</span> <span class="n">styles</span> <span class="o">=</span> <span class="n">getComputedStyle</span><span class="p">(</span><span class="n">document</span><span class="p">.</span><span class="n">documentElement</span><span class="p">);</span>
<span class="n">var</span> <span class="n">value</span> <span class="o">=</span> <span class="n">styles</span><span class="p">.</span><span class="n">getPropertyValue</span><span class="p">(</span><span class="ss">&quot;--theme-color&quot;</span><span class="p">);</span>
<span class="n">console</span><span class="p">.</span><span class="n">log</span><span class="p">(</span><span class="n">value</span><span class="p">);</span><span class="o">//</span><span class="n">red</span>

<span class="o">//</span><span class="n">js中更改</span><span class="c1">--theme-color的值</span>
<span class="n">document</span><span class="p">.</span><span class="n">documentElement</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">setProperty</span><span class="p">(</span><span class="ss">&quot;--theme-color&quot;</span><span class="p">,</span><span class="ss">&quot;black&quot;</span><span class="p">);</span>
</pre></div>


<p>明白了这个原理，以我的个人网站为例，我只需要，改变三个颜色属性即可将我的网站改变风格：logo,背景色，和字体色</p>
<div class="highlight"><pre><span></span><span class="p">:</span><span class="n">root</span><span class="p">{</span>
    <span class="o">--</span><span class="n">bg</span><span class="o">-</span><span class="n">color</span><span class="p">:</span><span class="c1">#fff;</span>
    <span class="o">--</span><span class="n">a</span><span class="o">-</span><span class="n">color</span><span class="p">:</span><span class="c1">#4A4A4A;</span>
    <span class="o">--</span><span class="n">logo</span><span class="p">:</span><span class="n">url</span><span class="p">(</span><span class="o">../</span><span class="n">images</span><span class="o">/</span><span class="n">logo</span><span class="o">.</span><span class="n">png</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>然后利用js，实时切换这三个变量即可</p>
<p>```python
function check_model(){</p>
<div class="highlight"><pre><span></span><span class="n">var</span> <span class="n">_items</span> <span class="o">=</span> <span class="p">[];</span>
</pre></div>


<p>var items = document.getElementsByName("switch_default");
   for(var i=0;i&lt;items.length;i++) {
   if (items[i].checked){_items.push(items[i].value);}
  }
   if(_items.length==0){</p>
<div class="highlight"><pre><span></span> <span class="n">document</span><span class="p">.</span><span class="n">documentElement</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">setProperty</span><span class="p">(</span><span class="ss">&quot;--bg-color&quot;</span><span class="p">,</span><span class="s1">&#39;#fff&#39;</span><span class="p">);</span>
 <span class="n">document</span><span class="p">.</span><span class="n">documentElement</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">setProperty</span><span class="p">(</span><span class="ss">&quot;--a-color&quot;</span><span class="p">,</span><span class="s1">&#39;#4A4A4A&#39;</span><span class="p">);</span>
 <span class="n">document</span><span class="p">.</span><span class="n">documentElement</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">setProperty</span><span class="p">(</span><span class="ss">&quot;--logo&quot;</span><span class="p">,</span><span class="s1">&#39;url(../images/logo.png)&#39;</span><span class="p">);</span>
 <span class="n">localStorage</span><span class="p">.</span><span class="n">setItem</span><span class="p">(</span><span class="ss">&quot;mode&quot;</span><span class="p">,</span> <span class="ss">&quot;light&quot;</span><span class="p">);</span>
</pre></div>


<p>}else{</p>
<div class="highlight"><pre><span></span> <span class="n">document</span><span class="p">.</span><span class="n">documentElement</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">setProperty</span><span class="p">(</span><span class="ss">&quot;--bg-color&quot;</span><span class="p">,</span><span class="s1">&#39;#292a2d&#39;</span><span class="p">);</span>
 <span class="n">document</span><span class="p">.</span><span class="n">documentElement</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">setProperty</span><span class="p">(</span><span class="ss">&quot;--a-color&quot;</span><span class="p">,</span><span class="s1">&#39;#a9a9b3&#39;</span><span class="p">);</span>
 <span class="n">document</span><span class="p">.</span><span class="n">documentElement</span><span class="p">.</span><span class="n">style</span><span class="p">.</span><span class="n">setProperty</span><span class="p">(</span><span class="ss">&quot;--logo&quot;</span><span class="p">,</span><span class="s1">&#39;url(../images/logo_dark.png)&#39;</span><span class="p">);</span>
 <span class="n">localStorage</span><span class="p">.</span><span class="n">setItem</span><span class="p">(</span><span class="ss">&quot;mode&quot;</span><span class="p">,</span> <span class="ss">&quot;dark&quot;</span><span class="p">);</span>
</pre></div>


<p>}
  ```</p>
<p>是不是很简单呢，这样就可以实现了，你可能也发现了，我利用webstorage技术来实现风格的状态保存，这样就可以保证用户在切换风格以后，可以记录用户选择的状态</p>
<p><img alt="img" src="http://m.qpic.cn/psc?/V11vDzPO1w5782/zfrllz9Q9AzvUwq**DIV0.y7seVK62ua43rVbtDODhF8cGz1pu0EuS.fLNpmeWk7Yef4lGBwGRHPoBfzMfgnRQ!!/b&amp;bo=ZAZsA2QGbAMDCSw!&amp;rf=viewer_4"></p>
<p>关于webstorage可以参看这篇文章：<a href="https://v3u.cn/a_id_94">彻底弄清楚session,cookie,sessionStorage,localStorage的区别及应用场景（面试向）</a> </p>
<p>前端技术虽然博大精深，但是作为一名全栈工程师，掌握前端也是十分必要的，想在互联网行业生存下去就取决于一个人的技术是否全面，我始终对同学的建议就是，不要惧怕前端，要热爱前端，关注前端从而反哺后端，只有不停的探索和学习，才能在技术这条路上走的平稳和长久。</p>
<ul>
<li>Next Post</li>
</ul></div>
	</div>
		<footer>
		  <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>.</p>
		  <p>&copy; 商伟</p>
		</footer>
	  </div>

	</div>
</body>
</html>