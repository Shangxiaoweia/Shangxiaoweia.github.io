<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>商伟的技术博客</title>
	<meta name="description" content="">
	<meta name="author" content="商伟">

	<!-- HTML5 shim, for IE6-8 support of HTML elements -->
	<!--[if lt IE 9]>
		<script src="/theme/html5.js"></script>
	<![endif]-->

	<!-- Styles -->
	<link href="/theme/bootstrap.min.css" rel="stylesheet">
	<link href="/theme/local.css" rel="stylesheet">
	<link href="/theme/pygments.css" rel="stylesheet">

	<!-- Feeds -->




</head>
<body>
	<div class="topbar">
	  <div class="topbar-inner">
		<div class="container-fluid">
		  <a class="brand" href="/">商伟的技术博客</a>
			<ul class="nav">
					<li ><a href="/category/django.html">Django</a></li>
					<li ><a href="/category/docker.html">Docker</a></li>
					<li ><a href="/category/git.html">GIT</a></li>
					<li ><a href="/category/javascript.html">JavaScript</a></li>
					<li ><a href="/category/mongodb.html">Mongodb</a></li>
					<li ><a href="/category/mysql.html">MySQL</a></li>
					<li ><a href="/category/pa-chong.html">爬虫</a></li>
					<li ><a href="/category/python.html">Python</a></li>
					<li ><a href="/category/rabbitmq.html">RabbitMQ</a></li>
					<li ><a href="/category/redis.html">redis</a></li>
					<li ><a href="/category/shu-ju-jie-gou.html">数据结构</a></li>
					<li class="active"><a href="/category/sui-shou-bi-ji.html">随手笔记</a></li>
					<li ><a href="/category/supervisor.html">Supervisor</a></li>
					<li ><a href="/category/vue.html">VUE</a></li>
					<li ><a href="/category/wang-luo.html">网络</a></li>
					<li ><a href="/category/web.html">web</a></li>
					<li ><a href="/category/xiao-cheng-xu.html">小程序</a></li>
					<li ><a href="/category/xu-ni-huan-jing.html">虚拟环境</a></li>
			</ul>
			<p class="pull-right"><a href="/archives.html">[archives]</a> <a href="/tags.html">[tags]</a></p>
		</div>
	  </div>
	</div>

	<div class="container-fluid">
	  <div class="sidebar">
		<div class="well">
			<h3>Blogroll</h3>
			<ul>
				<li><a href="http://getpelican.com/">Pelican</a></li>
				<li><a href="http://python.org/">Python.org</a></li>
				<li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
			</ul>
			<div class="social">
			<h3>Social</h3>
			<ul>
				<li><a href="https://han520min.github.io">hanmin</a></li>
			</ul>
			</div>
		</div>
	  </div>
	  <div class="content">
	<div class='article'>
		<div class="page-header"><h1>Docker</h1></div>
		<div class="well small">Permalink: <a class="more" href="/Docker.html">1000-01-01 18:44:00+00:09</a>
by <a class="url fn" href="/author/shang-wei.html">商伟 </a>
 in <a href="/category/sui-shou-bi-ji.html">随手笔记</a>
tags: <a href="/tag/sui-shou-bi-ji.html">随手笔记</a> </div>
		<div><p>Docker容器<a href="https://www.runoob.com/docker/docker-container-usage.html">https://www.runoob.com/docker/docker-container-usage.html</a></p>
<h5>设置阿里云镜像源</h5>
<div class="highlight"><pre><span></span>sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo 
</pre></div>


<h5>把yum更新到最新</h5>
<div class="highlight"><pre><span></span>yum update
</pre></div>


<h5>卸载旧版本</h5>
<div class="highlight"><pre><span></span>$ sudo yum remove docker  docker-common docker-selinux docker-engine
</pre></div>


<h5>安装依赖包</h5>
<div class="highlight"><pre><span></span>sudo yum install -y yum-utils device-mapper-persistent-data lvm2 
</pre></div>


<h5>设置阿里云镜像</h5>
<div class="highlight"><pre><span></span>sudo yum-config-manager --add-repo https://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo 
</pre></div>


<h5>选择版本库中的版本下载</h5>
<div class="highlight"><pre><span></span>yum list docker-ce --showduplicates | sort -r
</pre></div>


<h5>安装 Docker</h5>
<div class="highlight"><pre><span></span>yum install docker-ce-版本号，我选的是docker-ce-18.03.1.ce
</pre></div>


<h5>启动 Docker</h5>
<div class="highlight"><pre><span></span>systemctl enable docker
systemctl start docker
</pre></div>


<h5>配置开机自启</h5>
<div class="highlight"><pre><span></span>[root@localhost ~]# systemctl start docker
[root@localhost ~]# systemctl enable  docker
Created symlink from /etc/systemd/system/multi-user.target.wants/docker.service to /usr/lib/systemd/system/docker.service.
[root@localhost ~]# docker version
Client:
 Version:      18.03.1-ce
 API version:  1.37
 Go version:   go1.9.5
 Git commit:   9ee9f40
 Built:        Thu Apr 26 07:20:16 2018
 OS/Arch:      linux/amd64
 Experimental: false
 Orchestrator: swarm

Server:
 Engine:
  Version:      18.03.1-ce
  API version:  1.37 (minimum version 1.12)
  Go version:   go1.9.5
  Git commit:   9ee9f40
  Built:        Thu Apr 26 07:23:58 2018
  OS/Arch:      linux/amd64
  Experimental: false
</pre></div>


<h4>拉取镜像</h4>
<h5>拉取微软在 Docker 上的 aspnetcore 镜像:</h5>
<div class="highlight"><pre><span></span>docker pull microsoft/aspnetcore
</pre></div>


<h5>之后执行以下命令查看是否拉取成功:</h5>
<div class="highlight"><pre><span></span>docker images
</pre></div>


<h4>常用的命令</h4>
<h5>拉取镜像</h5>
<div class="highlight"><pre><span></span>docker pull
</pre></div>


<h5>删除容器</h5>
<div class="highlight"><pre><span></span>docker rm &lt;容器名 or ID&gt;
</pre></div>


<h5>查看容器日志</h5>
<div class="highlight"><pre><span></span>docker logs -f &lt;容器名 or ID&gt;
</pre></div>


<h5>查看正在运行的容器</h5>
<div class="highlight"><pre><span></span>docker ps
docker ps -a # 为查看所有的容器，包括已经停止的。
</pre></div>


<h5>删除所有容器</h5>
<div class="highlight"><pre><span></span>docker rm $(docker ps -a -q)
</pre></div>


<h5>停止、启动、杀死指定容器</h5>
<div class="highlight"><pre><span></span>docker start &lt;容器名 or ID&gt; # 启动容器
docker stop &lt;容器名 or ID&gt; # 启动容器
docker kill &lt;容器名 or ID&gt; # 杀死容器
</pre></div>


<h5>查看所有镜像</h5>
<div class="highlight"><pre><span></span>docker images
</pre></div>


<h5>拉取镜像</h5>
<div class="highlight"><pre><span></span>docker pull &lt;镜像名:tag&gt;
# 例如以下代码
docker pull sameersbn/redmine:latest
</pre></div>


<h5>后台运行</h5>
<div class="highlight"><pre><span></span>docker run -d &lt;Other Parameters&gt;
# 例如
docker run -d -p 127.0.0.1:33301:22 centos6-ssh
</pre></div>


<h5>暴露端口</h5>
<div class="highlight"><pre><span></span># 一共有三种形式进行端口映射
docker -p ip:hostPort:containerPort # 映射指定地址的主机端口到容器端口
# 例如：docker -p 127.0.0.1:3306:3306 映射本机3306端口到容器的3306端口
docker -p ip::containerPort # 映射指定地址的任意可用端口到容器端口
# 例如：docker -p 127.0.0.1::3306 映射本机的随机可用端口到容器3306端口
docer -p hostPort:containerPort # 映射本机的指定端口到容器的指定端口
# 例如：docker -p 3306:3306 # 映射本机的3306端口到容器的3306端口
</pre></div>


<h5>映射数据卷</h5>
<div class="highlight"><pre><span></span>docker -v /home/data:/opt/data # 这里/home/data 指的是宿主机的目录地址，后者则是容器的目录地址
</pre></div></div>
	</div>
		<footer>
		  <p>Powered by <a href="http://getpelican.com/">Pelican</a>. Theme based on <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap</a>.</p>
		  <p>&copy; 商伟</p>
		</footer>
	  </div>

	</div>
</body>
</html>